# Gateway

Точка входа в приложение. Прокси-сервер с возможностью прозрачной аутентификации запросов.

## Область ответственности 

Авторизация и аутентификация запросов

## Принцип работы

Аутентификация запросов — единственное место системы, где происходит синхронное межсервисное взаимодействие между сервисами [Gateway](gateway.md) и [Auth](auth.md). В будущем для повышения отказоустойчивости функционал проверки запросов можно будет вынести в отдельный сервис.

1. При каждом запросе Gateway проверяет в сервисе [Auth](auth.md), залогинен ли пользователь
    1. если пользователь залогинен, Gateway добавляет к запросу информацию о пользователе (заголовок X-User-Id или JWT-токен или как-то ещё)
    2. если пользователь не залогинен, Gateway отправляет его в сервис аутентификации

2. При каждом запросе Gateway проверяет, может ли пользователь работать с сервисом, к которому обращается:

   1. Если да — передаёт запрос в целевой сервис
   2. Если нет — показывает страницу 403
